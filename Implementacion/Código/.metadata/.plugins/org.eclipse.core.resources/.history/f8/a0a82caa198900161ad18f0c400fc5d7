package Futbol;

import java.io.File;

import org.opencv.core.Mat;
import org.opencv.core.MatOfByte;
import org.opencv.videoio.VideoCapture;
import org.opencv.videoio.Videoio;

public class FootballVideo extends AbstractVideo {
  private VideoCapture video;
  public FootballVideo(File data){
    super(data);
    String path = data.getAbsolutePath();
    video = new VideoCapture(data.getAbsolutePath());
    fps = (int) video.get(Videoio.CAP_PROP_FPS);
    cantFrames = (int) video.get(Videoio.CAP_PROP_FRAME_COUNT);
    //duracion = fps / cantFrames;
  }
  
  @Override
  public AbstractFrame getFrame() {
    Mat res = new Mat();
    video.read(res);

    int length = (int) (res.total() * res.elemSize());
    byte buffer[] = new byte[length];
    res.get(0, 0, buffer);
    return new FutbolFrame(buffer, res.height(), res.width());
  }
}
