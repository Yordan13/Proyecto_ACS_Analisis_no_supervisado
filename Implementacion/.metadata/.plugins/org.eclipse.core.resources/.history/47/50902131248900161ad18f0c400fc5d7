package Futbol;

import java.io.File;

import org.opencv.core.Mat;
import org.opencv.core.MatOfByte;
import org.opencv.imgcodecs.Imgcodecs;
import org.opencv.videoio.VideoCapture;
import org.opencv.videoio.VideoWriter;
import org.opencv.videoio.Videoio;

public class FootballVideo extends AbstractVideo {
  private VideoCapture video;
  public FootballVideo(File data){
    super(data);
    String path = data.getAbsolutePath();
    video = new VideoCapture();
    video.open(data.getAbsolutePath());
    fps = (int) video.get(Videoio.CAP_PROP_FPS);
    cantFrames = (int) video.get(Videoio.CAP_PROP_FRAME_COUNT);
    //duracion = fps / cantFrames;
  }
  
  @Override
  public AbstractFrame getFrame() {
    Mat res = new Mat();
    video.read(res);
    System.out.println(res.dump());
    int length = (int) (res.total() * res.elemSize());
    double buffer[] = new double[length];
    res.get(0, 0, buffer);
    return new FutbolFrame(buffer, res.height(), res.width());
  }
}
